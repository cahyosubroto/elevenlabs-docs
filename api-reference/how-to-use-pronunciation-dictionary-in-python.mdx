---
title: "How to use pronunciation dictionary (Python SDK)"
sidebarTitle: "How to use pronunciation dictionary"
description: "How to add, view, and remove rules to pronunciation dictionary with Python SDK"
icon: "code"
---

In this tutorial, you'll learn how to use a pronunciation dictionary with the ElevenLabs Python SDK. We'll start by adding rules to the pronunciation dictionary from a file and then compare the text-to-speech results that use and do not use the dictionary. After that, we'll remove the rule and test it again. Finally, we'll add a rule from the dictionary rules and test it once more.

If you want to jump straight to the finished repo you can find it [here](https://github.com/elevenlabs/elevenlabs-examples/tree/main/pronunciation-dictionaries/examples/pronunciation-dictionaries/python)

## Requirements

- An ElevenLabs account with an API key (here’s how to [find your API key](/api-reference/text-to-speech#authentication)).
- Python installed on your machine
- FFMPEG to play audio

## Setup

### Installing our SDK

Before you begin, make sure you have installed the necessary SDKs and libraries. You will need the ElevenLabs SDK for the updating pronunciation dictionary and using text-to-speech conversion. You can install it using pip:

```bash
pip install elevenlabs
```

Additionally, install `python-dotenv` to manage your environmental variables:

```bash
pip install python-dotenv
```

Next, create a `.env` file in your project directory and fill it with your credentials like so:

```
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here
```

## Initiate the Client SDK

We'll start by initializing the client SDK.

```python
import os
from elevenlabs.client import ElevenLabs

ELEVENLABS_API_KEY = os.getenv("ELEVENLABS_API_KEY")
client = ElevenLabs(
    api_key=ELEVENLABS_API_KEY,
)
```

## Create a Pronunciation Dictionary From a File

To create a pronunciation dictionary from a File, we'll start by creating a `.pls` file for our rules.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<lexicon version="1.0" 
      xmlns="http://www.w3.org/2005/01/pronunciation-lexicon"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
      xsi:schemaLocation="http://www.w3.org/2005/01/pronunciation-lexicon 
        http://www.w3.org/TR/2007/CR-pronunciation-lexicon-20071212/pls.xsd"
      alphabet="ipa" xml:lang="en-US">
  <lexeme>
    <grapheme>tomato</grapheme>
    <phoneme>/tə'meɪtoʊ/</phoneme>
  </lexeme>
  <lexeme>
    <grapheme>Tomato</grapheme>
    <phoneme>/tə'meɪtoʊ/</phoneme>
  </lexeme>
</lexicon>
```

This rule will use "ipa" alphabet and update pronunciation for `tomato` and `Tomato` with phoneme `/tə'meɪtoʊ/`. Save it as `dictionary.pls`.

```python
import requests
from elevenlabs import play, PronunciationDictionaryVersionLocator

def print_rules(client: ElevenLabs, dictionary_id: str, version_id: str):
    # TODO: replace with the SDK when fixed
    # client.pronunciation_dictionary.get_pls_file_with_a_pronunciation_dictionary_version_rules(
    #     dictionary_id=dictionary_id,
    #     version_id=version_id,
    # )
    response = requests.get(
        f"https://api.elevenlabs.io/v1/pronunciation-dictionaries/{dictionary_id}/{version_id}/download",
        headers={"xi-api-key": ELEVENLABS_API_KEY},
    )
    print("rules", response.text)

with open("dictionary.pls", "rb") as f:
    # this dictionary changes how tomato is pronounced
    pronunciation_dictionary = client.pronunciation_dictionary.add_from_file(
        file=f.read(), name="example"
    )

print("-- initial rules --")

print_rules(
    client, pronunciation_dictionary.id, pronunciation_dictionary.version_id
)

audio_1 = client.generate(
    text="Without the dictionary: tomato",
    voice="Rachel",
    model="eleven_turbo_v2",
)

audio_2 = client.generate(
    text="With the dictionary: tomato",
    voice="Rachel",
    model="eleven_turbo_v2",
    pronunciation_dictionary_locators=[
        PronunciationDictionaryVersionLocator(
            pronunciation_dictionary_id=pronunciation_dictionary.id,
            version_id=pronunciation_dictionary.version_id,
        )
    ],
)

# play the audio
play(audio_1)
play(audio_2)
```

In the snippet, we start by adding rules from a file and get the uploaded result. Finally, we generate and play two different text-to-speech audio to compare the custom pronunciation dictionary.

## Remove Rules From a Pronunciation Dictionary

To remove rules from a pronunciation dictionary, we can simply call `remove_rules_from_the_pronunciation_dictionary` method in the pronunciation dictionary module.

```python
pronunciation_dictionary_rules_removed = (
    client.pronunciation_dictionary.remove_rules_from_the_pronunciation_dictionary(
        pronunciation_dictionary_id=pronunciation_dictionary.id,
        rule_strings=["tomato", "Tomato"],
    )
)

print("\n\n-- removed rule --\n\n")

print_rules(
    client,
    pronunciation_dictionary_rules_removed.id,
    pronunciation_dictionary_rules_removed.version_id,
)

audio_3 = client.generate(
    text="With the rule removed: tomato",
    voice="Rachel",
    model="eleven_turbo_v2",
    pronunciation_dictionary_locators=[
        PronunciationDictionaryVersionLocator(
            pronunciation_dictionary_id=pronunciation_dictionary_rules_removed.id,
            version_id=pronunciation_dictionary_rules_removed.version_id,
        )
    ],
)

play(audio_3)
```

In the snippet, we start by removing rules based on the rule string and get the updated result. Finally, we generate and play another text-to-speech audio to test the difference.

## Add Rules to Pronunciation Dictionary

We can add rules directly to the pronunciation dictionary with `BodyAddRulesToThePronunciationDictionaryV1PronunciationDictionariesPronunciationDictionaryIdAddRulesPostRulesItem_Phoneme` and call `add_rules_to_the_pronunciation_dictionary` from the pronunciation dictionary.

```python
from elevenlabs import BodyAddRulesToThePronunciationDictionaryV1PronunciationDictionariesPronunciationDictionaryIdAddRulesPostRulesItem_Phoneme

pronunciation_dictionary_rules_added = client.pronunciation_dictionary.add_rules_to_the_pronunciation_dictionary(
    pronunciation_dictionary_id=pronunciation_dictionary_rules_removed.id,
    rules=[
        # TODO rename this
        BodyAddRulesToThePronunciationDictionaryV1PronunciationDictionariesPronunciationDictionaryIdAddRulesPostRulesItem_Phoneme(
            type="phoneme",
            alphabet="ipa",
            string_to_replace="tomato",
            phoneme="/tə'meɪtoʊ/",
        ),
        BodyAddRulesToThePronunciationDictionaryV1PronunciationDictionariesPronunciationDictionaryIdAddRulesPostRulesItem_Phoneme(
            type="phoneme",
            alphabet="ipa",
            string_to_replace="Tomato",
            phoneme="/tə'meɪtoʊ/",
        ),
    ],
)

print("\n\n-- added rule --\n\n")

print_rules(
    client,
    pronunciation_dictionary_rules_added.id,
    pronunciation_dictionary_rules_added.version_id,
)

audio_4 = client.generate(
    text="With the rule added again: tomato",
    voice="Rachel",
    model="eleven_turbo_v2",
    pronunciation_dictionary_locators=[
        PronunciationDictionaryVersionLocator(
            pronunciation_dictionary_id=pronunciation_dictionary_rules_added.id,
            version_id=pronunciation_dictionary_rules_added.version_id,
        )
    ],
)

play(audio_4)
```

In the snippet, we start by adding rules with `BodyAddRulesToThePronunciationDictionaryV1PronunciationDictionariesPronunciationDictionaryIdAddRulesPostRulesItem_Phoneme` class and get the updated XPathResult. Finally, we generate and play another text-to-speech audio to test the difference.

## Conclusion

You know how to use a pronunciation dictionary for generating text-to-speech audio. These functionailities open up opportunities to generate text-to-speech audio based on your pronunciation dictionary, making it more flexible for your use case.

For more details, visit our [example repo](https://github.com/elevenlabs/elevenlabs-examples/tree/main/pronunciation-dictionaries/examples/pronunciation-dictionaries/python) to see the full project files which give a clear structure for setting up your application:

- `env.example`: Template for your environment variables.
- `main.py`: The complete code for snippets above.
- `dictionary.pls`: Custom dictionary example with XML format.
- `requirements.txt`: List of python package used for this example.

If you have any questions please create an issue on the [elevenlabs-doc Github](https://github.com/elevenlabs/elevenlabs-docs/issues).